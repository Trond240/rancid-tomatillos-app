{"version":3,"sources":["components/MovieCard/MovieCard.js","actions/index.js","apicalls.js","components/MovieCardContainer/MovieCardContainer.js","components/MovieDetails/MovieDetails.js","components/NavBar/NavBar.js","components/LoginForm/LoginForm.js","components/LoginPage/LoginPage.js","components/App/App.js","serviceWorker.js","reducers/moviesList.js","reducers/index.js","reducers/loginFlow.js","reducers/loadReviews.js","reducers/updatePage.js","index.js"],"names":["connect","state","reviews","loadReviews","props","stars","currentReview","find","review","movie_id","id","createStars","rating","color","numStars","Math","ceil","filledStars","Array","fill","emptyStars","concat","map","star","index","key","className","src","alt","averageRating","posterImage","title","toFixed","to","data-testid","changePage","page","type","BASE","MovieCardContainer","movies","fetch","then","response","json","movieList","loadMovies","catch","err","console","error","message","movieCards","this","movie","poster_path","backdropImage","backdrop_path","releaseDate","release_date","overview","average_rating","onClick","sortMovies","Component","moviesList","dispatch","option","MovieDetails","log","successMsg","res","data","setState","user","method","headers","body","JSON","stringify","addReview","setTimeout","rateMovie","backgroundImage","style","disabled","loginFlow","updatePage","logOut","clearReviews","navDiv","name","LoginForm","email","password","errorMessage","e","target","value","loginUser","fetchRatings","userFaves","ratings","isEnabled","length","onChange","handleChange","placeholder","submitLogin","LoginPage","movieOfDay","floor","random","App","path","exact","component","params","match","parseInt","Boolean","window","location","hostname","moment","require","format","rootReducer","combineReducers","action","stateCopy","sort","a","b","store","createStore","composeWithDevTools","router","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d0eeee5e.chunk.js","sourcesContent":["import React from 'react';\nimport './MovieCard.css';\nimport { NavLink } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nconst MovieCard = (props) => {\n  const currentReview = props.reviews.find(review => review.movie_id === props.id);\n  let stars;\n  const createStars = (rating, color) => {\n    const numStars = Math.ceil(rating);\n    const filledStars = Array(numStars).fill(`/images/star-${color}.svg`);\n    const emptyStars = Array(10 - numStars).fill(\"/images/star-clear-outline.svg\");\n    stars = filledStars.concat(emptyStars).map((star, index) => {\n      return (\n        <img key={index} className = \"star\" src ={`${star}`} alt = {`${color} star`} />\n      )\n    })\n  }\n  \n  if (currentReview) {\n    createStars(currentReview.rating, 'yellow')\n  } else {\n    createStars(props.averageRating, 'green')\n  }\n  \n  return (\n    <section className=\"movie-card\">\n      <img\n        alt=\"movie poster\"\n        className=\"movie-poster\"\n        src={props.posterImage}\n      />\n      <h3>{props.title}</h3>\n      <p>Avg. Rating: {props.averageRating.toFixed(1)}</p>\n      <section className=\"rate-movie\">\n        {stars}\n      </section>\n      <NavLink to={`/movies/${props.id}`}>\n        <button \n        data-testid={props.id}\n        className=\"movie-details-btn\">View Movie Details</button>\n      </NavLink>\n    </section>\n  )\n}\n\nconst mapStateToProps = state => ({\n  reviews: state.loadReviews\n});\n\nexport default connect(mapStateToProps, null)(MovieCard);","export const loadMovies = movies => ({\n  type: 'LOAD_MOVIES',\n  movies\n})\n\nexport const loginUser = user => ({\n  type: 'LOGIN_USER',\n  user\n})\n\nexport const addReview = review => ({\n  type: 'ADD_REVIEW',\n  review\n})\n\nexport const loadReviews = reviews => ({\n  type: 'LOAD_REVIEWS',\n  reviews\n})\n\nexport const logOut = () => ({\n  type: 'LOGOUT_USER'\n})\n\nexport const clearReviews = () => ({\n  type: 'CLEAR_REVIEWS'\n})\n\nexport const changePage = page => ({\n  type: 'CHANGE_PAGE',\n  page\n})\n\nexport const showError = errorMessage => ({\n  type: 'SHOW_ERROR',\n  errorMessage\n})\n\nexport const sortMovies = option => ({\n  type: 'SORT_MOVIES',\n  option\n})","const BASE = 'https://rancid-tomatillos.herokuapp.com/api/v1'\n\nexport const fetchForMovies = () => {\n  return fetch(BASE + '/movies')\n      .then(response => response.json())\n}\n\nexport const postUser = (state) => {\n  return fetch(BASE + '/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({email: state.email, password: state.password})\n    })\n    .then(res => res.json())\n}\n\nexport const fetchRatings = (data) => {\n  return fetch(BASE + `/users/${data.user.id}/ratings`)\n    .then(res => res.json())\n}","import React, { Component } from 'react';\nimport MovieCard from '../MovieCard/MovieCard';\nimport './MovieCardContainer.css';\nimport { loadMovies, sortMovies } from '../../actions';\nimport { connect } from 'react-redux';\nimport { fetchForMovies } from '../../apicalls'\n\nclass MovieCardContainer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      movies: []\n    }\n  }\n\n  componentDidMount() {\n    fetchForMovies()\n      .then(movieList => {\n        this.props.loadMovies(movieList.movies)\n      })\n      .catch(err => console.error(err.message))\n  }\n\n  render() {\n    const { movies } = this.props;\n    const movieCards = movies.map(movie => {\n      return (\n        <MovieCard\n          key={movie.id}\n          id={movie.id}\n          title={movie.title}\n          posterImage={movie.poster_path}\n          backdropImage={movie.backdrop_path}\n          releaseDate={movie.release_date}\n          overview={movie.overview}\n          averageRating={movie.average_rating}\n        />\n      )\n    })\n    return (\n      <div className=\"movie-card-page\">\n        <div className=\"button-box\">\n          <button onClick={() => this.props.sortMovies('release-date')}>Sort By Release Date</button>\n          <button onClick={() => this.props.sortMovies('alphabetical')}>Sort Alphabetically</button>\n        </div>\n          <section data-testid=\"card-container\" className=\"movie-card-container\">\n            {movieCards}\n          </section>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  movies: state.moviesList\n});\n\nconst mapDispatchToProps = dispatch => ({\n  loadMovies: movies => dispatch(loadMovies(movies)),\n  sortMovies: option => dispatch(sortMovies(option))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MovieCardContainer)","import React, { Component } from 'react';\nimport './MovieDetails.css';\nimport { NavLink } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { addReview } from '../../actions'\n\nclass MovieDetails extends Component {\n  constructor(props) {\n    super(props);\n    console.log(this.props)\n    this.state = {\n      movie: this.props.movies.find(movie => movie.id === this.props.id),\n      error: '',\n      successMsg: ''\n    }\n  }\n\n  componentDidMount() {\n    console.log(this.props.id)\n    fetch(`https://rancid-tomatillos.herokuapp.com/api/v1/movies/${this.props.id}`)\n      .then(res => res.json())\n      .then(data => this.setState({movie: data.movie}))\n      .catch(err => console.error(err.message))\n  }\n\n  rateMovie(index) {\n    const currentReview = this.props.reviews.find(review => review.movie_id === this.props.id);\n    if (this.props.user && !currentReview) {\n      const rating = index + 1;\n      fetch(`https://rancid-tomatillos.herokuapp.com/api/v1/users/${this.props.user.id}/ratings`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ movie_id: this.props.id, rating: rating })\n      })\n        .then(res => res.json())\n        .then(data => {\n          this.props.addReview(data.rating)\n          this.setState({successMsg: `Your rating of ${data.rating.rating} stars has been successfully submitted`})\n          setTimeout(() => {\n            this.setState({\n              successMsg: ''\n            });\n          }, 2000);\n        })\n        .catch(err => this.setState({error: err.message}))\n    } else if(this.props.user) {\n      this.setState({error: 'Please undo your rating below to submit a new one.'});\n      setTimeout(() => {\n        this.setState({\n          error: ''\n        });\n      }, 2000);\n    } else {\n      this.setState({error: 'You must be logged in to review a movie'});\n      setTimeout(() => {\n        this.setState({\n          error: ''\n        });\n      }, 2000);\n    }\n  }\n\n  render() {\n    // might want to break out the movie destructuring so that we can use jest to mock it\n    const { movie } = this.state;\n    const currentReview = this.props.reviews.find(review => review.movie_id === this.props.id);\n    let stars;\n    const createStars = (rating, color) => {\n      const numStars = Math.ceil(rating);\n      const filledStars = Array(numStars).fill(`/images/star-${color}.svg`);\n      const emptyStars = Array(10 - numStars).fill(\"/images/star-clear-outline.svg\");\n      stars = filledStars.concat(emptyStars).map((star, index) => {\n        return (\n          <img key={index} onClick={() => this.rateMovie(index)} className = \"star\" src ={`${star}`} alt = {`${color} star`} />\n        )\n      })\n    }\n    if (movie && currentReview) {\n      createStars(currentReview.rating, 'yellow')\n    } else if (movie) {\n      createStars(this.state.movie.average_rating, 'green')\n    }\n\n    if(movie) {\n      const backgroundImage = {\n        backgroundImage: `url(${movie.backdrop_path})`\n      }\n      return (\n        <section className = \"details-section\" style = {backgroundImage}>\n          <div className = \"title-container\">\n            <h1>{movie.title}</h1>\n            <div className = \"stars-box\">\n              {stars}\n            </div>\n            {this.state.error && <p>{this.state.error}</p>}\n            {this.state.successMsg && <p>{this.state.successMsg}</p>}\n            <button disabled={!currentReview}>undo rating</button>\n          </div>\n          <article className = \"movie-details\">\n            <h3>Released: {movie.release_date}</h3>\n            <p>{movie.overview}</p>\n          </article>\n          <NavLink to=\"/\">\n            <button type=\"button\">Back to Browse</button>\n          </NavLink>\n        </section>\n      )\n    } else {\n      return (<section>loading...</section>)\n    }    \n  }\n}\n\nconst mapStateToProps = state => ({\n  movies: state.moviesList,\n  user: state.loginFlow.user,\n  reviews: state.loadReviews\n});\n\nconst mapDispatchToProps = dispatch => ({\n  addReview: review => dispatch(addReview(review))\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MovieDetails)","import React from 'react';\nimport './NavBar.css';\nimport { NavLink } from 'react-router-dom';\nimport { logOut, clearReviews, changePage } from '../../actions';\nimport { connect } from 'react-redux';\n\n\nconst NavBar = (props) => {\n    let navDiv;\n    if (props.page === 'login') {\n        navDiv = ''\n    } else if (props.user) {\n        navDiv = (<div className=\"nav-login-div\">\n                    <h4 className=\"user-name\">\n                        Welcome, {props.user.name}\n                    </h4>\n                    <NavLink\n                        to=\"/\"\n                        className=\"nav-login-link\">\n                        <button\n                        data-testid=\"logout-btn\"\n                        className=\"nav-login-button\"\n                        onClick={() => {\n                            props.logOut()\n                            props.clearReviews()\n                            props.changePage('movies')\n                        }}>\n                            Logout\n                        </button>\n                    </NavLink>\n                </div>)\n        } else {\n            navDiv = (<div className=\"nav-login-div\">\n                <h4 className=\"user-name\">\n                    Welcome! Please Login\n                </h4>\n                <NavLink\n                    to=\"/login\"\n                    className=\"nav-login-link\">\n                    <button\n                        className=\"nav-login-button\"\n                        onClick={() => props.changePage('login')}>\n                        Login\n                    </button>\n                </NavLink>\n            </div>)\n        }\n\n        return (\n            <section className=\"nav-bar\">\n                <div className=\"header-icon-container\">\n                    <h1 className=\"site-heading\">Rancid Tomatillos</h1>\n                    <img\n                        alt=\"tomato logo\"\n                        className=\"icon\"\n                        src=\"/images/tomato.svg\"\n                    />\n                </div>\n                {navDiv}\n            </section>\n        )\n}\n\nconst mapStateToProps = state => ({\n  user: state.loginFlow.user,\n  page: state.updatePage\n});\n\nconst mapDispatchToProps = dispatch => ({\n  logOut: () => dispatch(logOut()),\n  clearReviews: () => dispatch(clearReviews()),\n  changePage: page => dispatch(changePage(page))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NavBar);","import React, { Component } from \"react\";\nimport './LoginForm.css';\nimport { connect } from 'react-redux';\nimport { loginUser, loadReviews, changePage } from '../../actions';\nimport { NavLink } from 'react-router-dom';\nimport { postUser, fetchRatings } from '../../apicalls'\n\nclass LoginForm extends Component {\n  constructor() {\n    super();\n    this.state = {\n      email: '',\n      password: '',\n      errorMessage: ''\n    }\n  }\n\n  handleChange(e) {\n    this.setState({[e.target.name]: e.target.value})\n  }\n\n  submitLogin(e) {\n    postUser(this.state)\n      .then(data => {\n        this.props.loginUser(data)\n        fetchRatings(data)\n          .then(userFaves => this.props.loadReviews(userFaves.ratings))\n          .catch(err => console.error(err.message))\n      })\n     .catch(err => console.error(err.message))\n  }\n\n  render() {\n    const { email, password } = this.state;\n    const isEnabled =  email.length > 0 &&  password.length > 0;\n    \n    return(\n      <section className=\"login-container\">\n        <form>\n          <h2>Login</h2>\n          <input\n            onChange={(e) => this.handleChange(e)}\n            name=\"email\"\n            type=\"email\"\n            placeholder=\"Email\"\n            value={this.state.email}/>\n          <input\n            onChange={(e) => this.handleChange(e)}\n            name=\"password\"\n            type=\"password\"\n            placeholder=\"Password\"\n            value={this.state.password}/>\n         <div\n            onClick={e => {\n              this.submitLogin(e)\n              this.props.changePage('movies')\n            }}\n            type=\"button\"\n            className=\"login-container\">\n               <NavLink\n                className=\"login-link\"\n                to=\"/\">\n                <button disabled={!isEnabled} data-testid=\"login-button\" className=\"login-button\" type=\"button\">Login</button>\n              </NavLink>\n          </div>\n            <div>\n              <p>{this.state.errorMessage}</p>\n            </div>\n        </form>\n      </section>\n    )\n  }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  loginUser: user => dispatch(loginUser(user)),\n  loadReviews: reviews => dispatch(loadReviews(reviews)),\n  changePage: page => dispatch(changePage(page))\n})\n\nexport default connect(null, mapDispatchToProps)(LoginForm)","import React, { Component } from 'react'\nimport './LoginPage.css'\nimport LoginForm from '../LoginForm/LoginForm'\nimport { connect } from 'react-redux';\n\nclass LoginPage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      movieOfDay: this.props.movies[Math.floor(Math.random() * this.props.movies.length)]\n    }\n  }\n  render() {\n    const moviePoster = () => {\n      if (this.state.movieOfDay) {\n        return this.state.movieOfDay.poster_path\n      } else {\n        return 'https://image.tmdb.org/t/p/original//AuGiPiGMYMkSosOJ3BQjDEAiwtO.jpg'\n      }\n    }\n    return(\n      <section className=\"login-page\">\n        <LoginForm />\n        <div className=\"login-image-container\">\n          <h2>Movie Of The Day</h2>\n          <img className=\"login-img\" src={moviePoster()} alt=\"movie-poster\" />\n        </div>\n      </section>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  movies: state.moviesList\n})\nexport default connect(mapStateToProps, null)(LoginPage)\n","import React from 'react';\nimport './App.css';\nimport MovieCardContainer from '../MovieCardContainer/MovieCardContainer';\nimport MovieDetails from '../MovieDetails/MovieDetails';\nimport NavBar from '../NavBar/NavBar';\nimport LoginPage from '../LoginPage/LoginPage';\nimport { Route, Switch } from 'react-router-dom';\n\nconst App = () => {\n    return (\n      <div className=\"App\">\n        <NavBar />\n        <Switch>\n          <Route\n            path=\"/\" exact\n            component={() =>\n              <MovieCardContainer />\n            }\n          />\n          <Route\n            path=\"/login\" exact\n            component={() =>\n              <LoginPage />\n            }\n          />\n          <Route\n            path=\"/movies/:movie_id\"\n            component={({ match }) => {\n              const { params } = match;\n              return (<MovieDetails\n                id={parseInt(params.movie_id)}\n              />)\n            }}\n          />\n          <Route\n            path=\"/users/:user_id/ratings\" exact\n            component={() =>\n              <MovieCardContainer />\n            }\n          />\n        </Switch>\n      </div>\n    );\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","var moment = require('moment');\nmoment().format();\n\nexport const moviesList = (state = [], action) => {\n  switch (action.type) {\n    case 'LOAD_MOVIES':\n      return [...action.movies];\n    case 'SORT_MOVIES':\n      let stateCopy = [...state];\n      if (action.option === 'release-date') {\n        stateCopy.sort((a, b) => {\n          return moment(a.release_date) - moment(b.release_date)\n        })\n      } else if (action.option === 'alphabetical'){\n        stateCopy.sort((a, b) => {\n          if (a.title < b.title) {\n            return -1;\n          } else if (a.title < b.title) {\n            return 1;\n          }\n        })\n      }\n      return stateCopy;\n    default:\n      return state;\n  }\n}","import { combineReducers } from 'redux';\nimport { moviesList } from './moviesList';\nimport { loginFlow } from './loginFlow';\nimport { loadReviews } from './loadReviews';\nimport { updatePage } from './updatePage';\n\nconst rootReducer = combineReducers({\n  moviesList,\n  loginFlow,\n  loadReviews,\n  updatePage\n});\n\nexport default rootReducer;","export const loginFlow = (state = {}, action) => {\n  switch(action.type) {\n    case 'LOGIN_USER':\n      return {...state, ...action.user}\n    case 'LOGOUT_USER':\n      return {}\n    default:\n      return state;\n  }\n}\n\n","export const loadReviews = (state = [], action) => {\n  switch(action.type) {\n    case 'LOAD_REVIEWS':\n      return [...state, ...action.reviews];\n    case 'CLEAR_REVIEWS':\n      return [];\n    case 'ADD_REVIEW':\n      return [...state, action.review]\n    default:\n      return state;\n  }\n}","export const updatePage = (state = 'movies', action) => {\n  switch(action.type) {\n    case 'CHANGE_PAGE':\n      return action.page\n    default:\n      return state\n  }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from '../src/components/App/App';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { createStore } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport rootReducer from './reducers';\n\nconst store = createStore(rootReducer, composeWithDevTools());\n\nconst router = <BrowserRouter><App></App></BrowserRouter>\n\nReactDOM.render(\n  <Provider store={store}>\n    <React.StrictMode>\n      {router}\n    </React.StrictMode>\n  </Provider>\n  ,\n  document.getElementById('root')\n);\n\nserviceWorker.unregister();\n"],"sourceRoot":""}